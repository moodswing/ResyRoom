@model ResyRoom.Models.RegistroDeUsuario
@{
    ViewBag.Title = "Registrar nuevo usuario";
}
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcValidation.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#Usuario_Banda_Descripcion").css('width', '188px');
        $("#ddlRegiones").change(function(data) {
            var accion = @Url.Action("ComunasDeUnaRegion", "User");
            accion = "" + accion + "/";

            $.post(accion, $("#ddlRegiones").val(), function() {
                $("select[id$=Estudio_IdComuna] > option").remove();
                
                $.each(data, function(key, value) {   
                    $('#Estudio_IdComuna')
                        .append($("<option></option>")
                        .attr("value", key)
                        .text(value)); 
                });
            });
        });
    })
</script>
<div class="content">
    <div class="form">
        @using (Html.BeginForm())
        {
            <table class="tableForm">
                <tr>
                    <td style="width: 47%;">
                        <table>
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        <h1>
                                            Información del Usuario</h1>
                                        <div style="border-top: 1px solid gainsboro; margin-top: 5px;" />
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Usuario)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Usuario, new { @class = "txt" })
                                        @Html.ValidationMessageFor(u => u.Usuario)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Email)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Email, new { @class = "txt" })
                                        @Html.ValidationMessageFor(u => u.Email)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Password)
                                    </td>
                                    <td>
                                        @Html.PasswordFor(u => u.Password, new { @class = "txt" })
                                        @Html.ValidationMessageFor(u => u.Password)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.PasswordConfirmacion)
                                    </td>
                                    <td>
                                        @Html.PasswordFor(u => u.PasswordConfirmacion, new { @class = "txt" })
                                        @Html.ValidationMessageFor(u => u.PasswordConfirmacion)
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td>
                        <table>
                            <thead>
                                <tr>
                                    <th colspan="2">
                                        <h1>
                                            Información del Estudio</h1>
                                        <div style="border-top: 1px solid gainsboro; margin-top: 5px;" />
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Estudio.Nombre)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Estudio.Nombre, new { @class = "txt", @style = "width:190px" })
                                        @Html.ValidationMessageFor(u => u.Estudio.Nombre)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        Región
                                    </td>
                                    <td>
                                        @Html.DropDownList("ddlRegiones", new SelectList(ViewBag.Regiones, "IdRegion", "Descripcion"), new { @style = "width:194px; " })
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Estudio.IdComuna)
                                    </td>
                                    <td>
                                        @Html.DropDownListFor(u => u.Estudio.IdComuna, new SelectList(ViewBag.Comunas, "IdComuna", "Descripcion"), new { @style = "width:194px; " })
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Estudio.Direccion)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Estudio.Direccion, new { @class = "txt", @style = "width:190px" })
                                        @Html.ValidationMessageFor(u => u.Estudio.Direccion)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Estudio.Email)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Estudio.Email, new { @class = "txt", @style = "width:190px" })
                                        @Html.ValidationMessageFor(u => u.Estudio.Email)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Estudio.Telefono)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Estudio.Telefono, new { @class = "txt", @style = "width:190px" })
                                        @Html.ValidationMessageFor(u => u.Estudio.Telefono)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        @Html.LabelFor(u => u.Estudio.Celular)
                                    </td>
                                    <td>
                                        @Html.TextBoxFor(u => u.Estudio.Celular, new { @class = "txt", @style = "width:190px" })
                                        @Html.ValidationMessageFor(u => u.Estudio.Celular)
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    </td>
                                    <td>
                                        <input type="submit" value="Ingresar" class="boton botonOk" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        @Html.ValidationSummary(true, "Revise que los datos hayan sido ingresados correctamente.")
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: left !important;">
                        <br />
                        <h2>
                            Registro</h2>
                        <p>
                            En <b>ResyRoom</b> brindamos el servicio para que cada estudio pueda ingresar y
                            mostrar su estudio, ya sea de grabación o de ensayo, de esta forma dispondrá de
                            un mayor acceso via un medio tan masivo como lo es hoy en día internet.
                            <br />
                            <br />
                            Ingrese los datos para su <b>identificación</b> como usuario, y a continuación los
                            datos básicos de su <b>estudio</b>
                        </p>
                    </td>
                </tr>
            </table>
        }
    </div>
</div>
